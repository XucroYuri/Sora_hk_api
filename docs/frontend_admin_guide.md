# 前端管理后台使用说明

**版本**: v0.1  
**适用范围**: 内部运营 / 后端联调（不面向普通用户）  

---

## 1. 入口与前置条件

- 前端地址：`http://127.0.0.1:8090`
- 进入「管理后台」前需在 **连接设置** 中填写 `AUTH_TOKEN`（如后端启用认证）
- 后端接口：`/api/v1/admin/*`

## 2. 服务商配置（Providers）

**入口**: 管理后台 → 服务商配置

字段含义：
- **启用**：控制服务商是否参与调度
- **优先级（priority）**：数值越小优先级越高，`1-100`
- **权重（weight）**：仅在 `weighted` 路由策略下生效，`1-100`
- **支持时长/分辨率/专业模式**：为能力展示，实际由后端校验

使用建议：
- **至少保留一个服务商启用**，避免 `no_provider` 错误
- 需要强制命中某服务商时，可暂时禁用其他服务商

## 3. 模型映射（Model Mapping）

**入口**: 管理后台 → 模型映射

字段说明：
- 映射值为 `provider_model_ids`，多个 ID 用英文逗号分隔
- 每个逻辑模型可对应多个 Provider 侧模型 ID
- 后端会校验：空值/重复值/非法列表

示例：
- `sora2` → `sora-2, web-sora-2`
- `sora2pro` → `sora-2-pro, web-sora-2-pro`

## 4. 推荐操作流程

**场景 A：主用 AIHubMix，保留 Sora.hk 备用**
1) 启用 `aihubmix`，启用 `sora_hk`
2) `routing_strategy=default` 时优先级更高者先选中
3) 需要备用切换时，使用 `failover` 策略

**场景 B：联调强制命中某 Provider**
1) 仅启用目标 Provider
2) 执行一次真实生成
3) 结束后恢复默认启用状态

## 5. 常见问题

- **validation_error**：priority/weight 超出 1-100 或映射为空
- **no_provider**：所有服务商被禁用或能力不匹配
- **rate_limited**：服务商限流，请降低并发或稍后重试

## 6. 安全提示

- 管理后台仅供内部使用，请勿对外暴露
- 不要在前端页面展示真实的 Provider Key
